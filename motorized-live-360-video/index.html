<!DOCTYPE html>
<html lang="en-us" class="no-js">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <link type="text/plain" rel="author" href="http://rmj.us/humans.txt" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <!-- Optimized for search engines -->
  <meta name="description" content="We built a live 360° video system for under $40.">

  

  <link rel="canonical" href="http://rmj.us/motorized-live-360-video">

  

  

  <!-- Twitter card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@ryan_mjacobs">
  <meta name="twitter:creator" content="@ryan_mjacobs">
  <meta name="twitter:title" content="Motorized, Live 360° Video<br>(Before Facebook did it)">
  <meta name="twitter:description" content="We built a live 360° video system for under $40.">
  <meta name="twitter:image" content="http://rmj.us/motorized-live-360-video/assets//images/hero/webcam.jpg">
  <meta name="twitter:url" content="http://rmj.us/motorized-live-360-video">

  <!-- Open graph -->
  <meta property="og:title" content="Motorized, Live 360° Video<br>(Before Facebook did it)">
  <meta property="og:type" content="article">
  <meta property="og:url" content="http://rmj.us/motorized-live-360-video">
  <meta property="og:image" content="http://rmj.us/motorized-live-360-video/assets//images/hero/webcam.jpg">
  <meta property="og:description" content="We built a live 360° video system for under $40.">
  <meta property="og:site_name" content="rmj.us">
  <meta property="og:locale" content="en_us">

  
    <meta property="article:modified_time" content="2016-12-27T00:00:00-08:00">
    <meta property="article:published_time" content="2016-12-27T00:00:00-08:00">
    <meta property="article:author" content="https://www.facebook.com/">
    
  

  
    
    <meta property="article:section" content="Blog">
    
  

  
    
    <meta property="article:tag" content="mickey">
    
  

  <meta property="fb:admins" content="">
  <meta property="fb:app_id" content="">

  <title>
    
      Motorized, Live 360° Video<br>(Before Facebook did it) &middot; Ryan Jacobs
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/motorized-live-360-video/assets//css/main.css">

  

  <!-- Fonts -->
  <link href='http://fonts.googleapis.com/css?family=Source+Serif+Pro:700,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Roboto:100,300' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=PT+Sans:700' rel='stylesheet' type='text/css'>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/motorized-live-360-video/assets//apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/motorized-live-360-video/assets//images/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

  <!-- modernizer -->
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>

  <!--[if lt IE 9]>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
  <![endif]-->

  <!--[if (gte IE 6)&(lte IE 8)]>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/selectivizr/1.0.2/selectivizr-min.js"></script>
  <![endif]-->
</head>


  <body>
    
      <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
      <nav role="navigation" class="sidebar sidebar--right">
  <a href="/" class="mainLogo mainLogo-sidebar">// Ryan Jacobs</a>
  <ul class="sidebar-recentPosts">
    
      
        <!-- exclude current post -->
      
    
  </ul>
</nav>

      <nav class="menuWrapper">
  <ul class="popover popover--menu">
    <li class="menu-avatar">
      <a href="/" class="brandLogo brandLogo--small
      
      ">rmj.us</a>
      <ul class="list list--avatarMenu hidden">
        <li class="list-item"><a href="">Twitter</a></li>
        <li class="list-item"><a href="">LinkedIn</a></li>
        <li class="list-item"><a href="">Quora</a></li>
        <li class="list-item"><a href="">Dribbble</a></li>
        <li class="list-item"><a href="">Kiva</a></li>
      </ul>
    </li>
  </ul>
</nav>

    

    <article class="postWrapper">
  <section class="section--first is-darkBackgrounded u-table">
    <div class="section-backgroundImage">

      
        <img class="post-featuredImage" src="/motorized-live-360-video/assets//images/hero/webcam.jpg" style="
        
        " alt="">
      

    </div>
    <div class="section-gradient
    
      section-gradient--darker
    
    "></div>
    <div class="section-title is-darkBackgrounded u-tableCell u-verticalAlignMiddle">
      <div class="container">
        <h2>Motorized, Live 360° Video<br>(Before Facebook did it)</h2>
        <div class="postMeta-wrapper">
          <ul class="postMeta">
            <li class="postMeta-datetime">
              <time datetime="2016-12-27 00:00:00 -0800">
                27 Dec 2016
              </time>
            </li>
            <li class="postMeta-author">
              By Ryan Jacobs
            </li>
            <li class="postMeta-tags">
              Blog
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>
  <section class="section--last">
    <div class="container container--content">
      <div class="content-body">

        <p>I love bouncing ideas off friends. Sometimes a novel idea just strikes you
out of nowhere. We came up with this one when discussing the recent development
of remote-controlled robotic hands.</p>

<blockquote>
  <p>“Great minds discuss ideas; average minds discuss events; small minds discuss people.</p>
</blockquote>

<p>The software was done by me (age 18), and the physical construction was
done by my pal Kyle (age 17). (FYI, most of the software was just ‘glue-work’).
Facebook recently unveiled their live 360 video rig — and to be fair,
it’s <em>much</em> better than ours — but maybe we get street cred for doing
it first?</p>

<p>We built this contraption as a proof-of-concept some time in early November.
All the pieces lined up just right for its creation. First of all, Mozilla’s
WebVR API was mature enough to give us uninhibited realtime access to
smartphone orientation data. Secondly, the iPhone 6 (and similar models) had
massive screens that could completely fill people’s field of view <em>and</em> they
boasted speedy hardware that could constantly repaint the canvas <em>and</em> could
simultaneously send crucial telemetry data. Lastly, 802.11n was fast
enough to trasmit our live MPEG streams with minimal latency.</p>

<p><img src="/motorized-live-360-video/assets//images/vr-building.jpg" alt="vr building" />
<small>&gt; our messy lab area</small></p>

<h4 id="parts-list">Parts list:</h4>
<ul>
  <li>Wood scraps (free)</li>
  <li>Arduino ($4)</li>
  <li>Two servos ($10)</li>
  <li>USB 720p Webcam ($15)</li>
  <li>iPhone (borrowed)</li>
  <li>“Google Cardboard”-based HMD ($10)</li>
</ul>

<p>This was a <em>very</em> cheap project. Heck, we already had everything except for
the USB webcam which we bought on Amazon.</p>

<h4 id="diagram">Diagram:</h4>
<p><img src="/motorized-live-360-video/assets//images/vr-diagram.jpg" alt="vr diagram" />
<small>&gt; how the whole thing works… (hint: I’m not an artist…)</small><br />
<small>&gt; also, I meant MPEG instead of MJPEG</small></p>

<h4 id="video-clips">Video clips:</h4>
<p><a href="https://drive.google.com/file/d/0B8ow8UFcYneeOHNrb1JGWFZWd3M/view">https://drive.google.com/file/d/0B8ow8UFcYneeOHNrb1JGWFZWd3M/view</a>
<a href="https://drive.google.com/file/d/0B8ow8UFcYneecVI1NGdBRHdPcTg/view">https://drive.google.com/file/d/0B8ow8UFcYneecVI1NGdBRHdPcTg/view</a></p>

<iframe src="https://drive.google.com/file/d/0B8ow8UFcYneeOHNrb1JGWFZWd3M/preview" width="640" height="360" style="margin-top: 20px"></iframe>
<iframe src="https://drive.google.com/file/d/0B8ow8UFcYneecVI1NGdBRHdPcTg/preview" width="640" height="360"></iframe>

<h4 id="code">Code:</h4>
<p>I dumped all of the code online here:
<a href="https://github.com/ryanmjacobs/funbox">ryanmjacobs/funbox</a>.
Sadly “funbox” was the best name we could come up with.</p>

<p>I sectioned the code into three main parts. First off, there is the
<a href="https://github.com/ryanmjacobs/funbox/blob/master/firmware/src/main.ino">simple servo control firmware</a>
which basically reads two bytes from
a serial connection. Then it uses those two bytes respectively for the
X-axis and the Y-axis of the servo rig.</p>

<p>Secondly, there is a
<a href="https://github.com/ryanmjacobs/funbox/tree/master/static">static directory</a>
that is hosted with any HTTP server. I prefer <tt>darkhttpd</tt> but
Node.js’s <tt>http-server</tt> works just as well. This is the home to the
Javascript code that renders the MPEG stream and transmits orientation data
to the server after converting it to Euclidean angles. The meat of the code
is right here: <a href="https://github.com/ryanmjacobs/funbox/blob/master/static/js/main.js">static/js/main.js</a>.</p>

<p>Lastly,
<a href="https://github.com/ryanmjacobs/funbox/tree/master/server">the server code</a>
runs on my laptop. The server accepts orientation data and sends it across
the serial connection to the Arduino. Then the Arduino controls the servos to
match the phone’s orientation. There are actually three components to the
server code. First and foremost is the Node.js server that parses and
communicates the phone orientation data. Secondly, there is a Node.js server
that transmits the MPEG stream from the webcam to the client phone. Lastly,
the <tt>ffmpeg</tt> command uses <tt>v4l2</tt> to read the video stream
from the USB webcam mounted on the two servos.</p>

<h4 id="difficulties">Difficulties:</h4>
<p><img src="/motorized-live-360-video/assets//images/ah.png" alt="vr building" />
<small>&gt; ahhh… too many letters and not enough numbers</small><br />
WebVR’s API returns quaternions in order to represent the phone’s orientation
in 3D space. And they are really confusing (for a high schooler at least). It
was difficult to comprehend them at first, but now I see how useful they are.
But with our rig, we only need two dimensions. So in this case they are
kinda pointless because gimbal lock will never occur. Initially I used
some formulas I found online to do the conversion to typical Euclidean angles…
but then I discovered that <tt>Three.js</tt> did it already so now I use
that.</p>

<p>Follow me on Twitter to get notified of new posts:
<a href="//twitter.com/ryan_mjacobs">@ryan_mjacobs</a></p>


      </div>
    </div>
    <hr class="u-clearHr"/>
    <hr class="u-clearHr"/>
    <hr/>
    <div class="container container--content">
      <div class="content-body">
        <div class="content-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES * * */
      var disqus_shortname = '';

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>

      </div>
    </div>
  </section>
  <footer class="postFooter">
    
  </footer>
</article>

<div class="modal-toggle-group animate scaleIn">
  <div class="modal-toggle-bubbleShadow"></div>
  <div class="modal-toggle-bubble"></div>
  <div class="modal-toggle-wrapper"></div>
  <div class="modal-toggle-close-wrapper">
    <div class="modal-toggle-close"></div>
  </div>
</div>

<div class="fullscreenModal u-table">
  <div class="u-tableCell u-verticalAlignMiddle">
    <h2 class="h2--shareTitle">Share this story</h2>
    <ul class="shareWrapper">
      <li><a class="shareButton shareButton--twitter" href="https://twitter.com/intent/tweet?text=Motorized, Live 360° Video<br>(Before Facebook did it) by @ryan_mjacobs&url=http%3A%2F%2Frmj.us%2Fmotorized-live-360-video" target="_blank"></a></li>
      <li><a class="shareButton shareButton--facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Frmj.us%2Fmotorized-live-360-video" target="_blank"></a></li>
      <li><a class="shareButton shareButton--linkedin" href="https://www.linkedin.com/shareArticle
?mini=true&url=http%3A%2F%2Frmj.us%2Fmotorized-live-360-video&title=Motorized, Live 360° Video<br>(Before Facebook did it)"  target="_blank"></a></li>
      <li><a class="shareButton shareButton--buffer" href="https://buffer.com/add?text=Motorized, Live 360° Video<br>(Before Facebook did it) by @ryan_mjacobs&url=http%3A%2F%2Frmj.us%2Fmotorized-live-360-video" target="_blank"></a></li>
      <li><a class="shareButton shareButton--hackernews" href="http://news.ycombinator.com/submitlink?u=http%3A%2F%2Frmj.us%2Fmotorized-live-360-video&t=Motorized, Live 360° Video<br>(Before Facebook did it)" target="_blank"></a></li>
      <li><a class="shareButton shareButton--pocket" href="https://getpocket.com/save?url=http%3A%2F%2Frmj.us%2Fmotorized-live-360-video&title=Motorized, Live 360° Video<br>(Before Facebook did it)" target="_blank"></a></li>
    </ul>
  </div>
</div>



    
      <label for="sidebar-checkbox" class="sidebar-toggle-wrapper">
  <div class="sidebar-toggle"></div>
</label>

    

    

    <!-- Javascript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="/motorized-live-360-video/assets//javascripts/imagesloaded.pkgd.min.js"></script>



<script>
  $(document).ready(function(){

    // Featured image loaded behavior
    $('.section-backgroundImage img').imagesLoaded()
      .done( function( instance ) {
        $('.post-featuredImage').addClass('is-loaded');
      });

    // Modal toggle behavior
    $('.modal-toggle-wrapper').click(function() {
    	$(this).toggleClass('active');
      $('.modal-toggle-bubble').toggleClass('active');
    	$('.modal-toggle-bubbleShadow').toggleClass('active');
      $('.modal-toggle-close-wrapper').toggleClass('active');
      $('.fullscreenModal').toggleClass('active');
    });

    // Prevent default anchor event and make a share popup
    $.fn.sharePopup = function (e, intWidth, intHeight, blnResize) {

      e.preventDefault();
      intWidth = intWidth || '750';
      intHeight = intHeight || '500';
      strResize = (blnResize ? 'yes' : 'no');

      //// Set title and open popup with focus on it
      var strTitle = ((typeof this.attr('title') !== 'undefined') ? this.attr('title') : 'Social Share'),
          strParam = 'width=' + intWidth + ',height=' + intHeight + ',resizable=' + strResize,
          objWindow = window.open(this.attr('href'), strTitle, strParam).focus();
    }

    $('.shareButton').on("click", function(e) {
      $(this).sharePopup(e);
    });
  });

  // Show modal toggle after scrolling 300px
  $(document).scroll(function() {
    $('.modal-toggle-group').toggleClass('active', $(document).scrollTop() >= 300);
  });
</script>

  </body>
</html>
